<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ReVive | Order Summary</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="order-page">
    <header class="top-bar">
      <a href="dashboard.html">
        <img src="assets/logo.svg" alt="ReVive Logo" class="logo">
      </a>
      <nav class="nav-icons">
        <input 
        type="text" 
        placeholder="Search..." 
        style="margin-left: 200px; padding: 6px 12px; border: 2px solid #666; border-radius: 6px; font-size: 14px;"
      >            
        <a href="articles.html">
          <img src="assets/bio-leaves.svg" alt="articles" class="logo" />
        </a>
        <a href="track.html">
          <img src="assets/chart-histogram.svg" alt="chart" class="logo" />
        </a>
        <a href="shop.html">
          <img src="assets/store.svg" alt="store" class="logo" />
        </a>
        <a href="checkout.html" class="cart-icon">
          <img src="assets/shopping-cart.svg" alt="shopping-cart" class="logo" />
          <span class="cart-badge" id="cart-count">0</span>
        </a>        
        <div class="profile-dropdown">
            <img src="assets/profileicon.svg" alt="Profile" class="logo profile-icon" />
            <div class="dropdown-menu"style="background-color: rgba(255, 255, 255, 0.8); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); backdrop-filter: blur(8px);">
              <a href="profile.html">Profile</a>
              <a href="order.html">Order Summary</a>
              <a href="index.html" id="logout-btn">Logout</a>
            </div>
      </nav>
    </header>

    <main class="checkout-content">
      <section class="checkout-summary">
        <h2>Your Order</h2>
        <ul id="order-items-list">
          <!-- Items will be inserted here -->
        </ul>
        <p class="total" id="order-total">Total: <strong>$0.00</strong></p>
      </section>
    </main>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Update cart badge
      const badge = document.getElementById("cart-count");
      badge.textContent = localStorage.getItem("cartCount") || "0";
  
      const list = document.getElementById("order-items-list");
      const totalDisplay = document.getElementById("order-total");
  
      // Check if an order was placed
      const orderPlaced = localStorage.getItem("orderPlaced");
  
      if (!orderPlaced) {
        list.innerHTML = "<li>No recent orders found.</li>";
        totalDisplay.innerHTML = `Total: <strong>$0.00</strong>`;
        return;
      }
      
      const shippingInfo = JSON.parse(localStorage.getItem("lastShippingInfo"));
      if (shippingInfo) {
        const shippingSummary = document.createElement("p");
        shippingSummary.innerHTML = `<strong>Shipping To:</strong> ${shippingInfo.name}, ${shippingInfo.address}`;
        list.insertAdjacentElement("beforebegin", shippingSummary);
      }

      // If order was placed, display summary
      const cartItems = JSON.parse(localStorage.getItem("lastPlacedItems")) || [];
      let total = 0;
  
      cartItems.forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.name} - $${item.price}`;
        list.appendChild(li);
        total += item.price;
      });
  
      totalDisplay.innerHTML = `Total: <strong>$${total.toFixed(2)}</strong>`;
  
    });
  </script>
  
</body>
</html>
