<!DOCTYPE html>
<html>
<head>
  <title>ReVive | Eco-Friendly Shop</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="top-bar">
    <a href="dashboard.html">
      <img src="assets/logo.svg" alt="ReVive Logo" class="logo">
    </a>
    <nav class="nav-icons">
      <div class="smart-search-container">
        <input type="text" id="site-search" placeholder="Search..." autocomplete="off" />
        <div id="search-suggestions" class="suggestions-box"></div>
      </div>           
      <a href="articles.html">
        <img src="assets/bio-leaves.svg" alt="articles" class="logo" />
      </a>
      <a href="track.html">
        <img src="assets/chart-histogram.svg" alt="chart" class="logo" />
      </a>
      <a href="shop.html">
        <img src="assets/store.svg" alt="store" class="logo" />
      </a>
      <a href="checkout.html" class="cart-icon">
        <img src="assets/shopping-cart.svg" alt="shopping-cart" class="logo" />
        <span class="cart-badge" id="cart-count">0</span>
      </a>      
      <div class="profile-dropdown">
        <img src="assets/profileicon.svg" alt="Profile" class="logo profile-icon" />
        <div class="dropdown-menu" style="background-color: rgba(255, 255, 255, 0.5); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); backdrop-filter: blur(8px);">
          <a href="profile.html">Profile</a>
          <a href="order.html">Order Summary</a>
          <a href="index.html" id="logout-btn">Logout</a>
        </div>
      </div>
    </nav>
  </header>

<main class="content shop-page">
  <div class= "product">
    <h3>Shop our Eco-Friendly Products</h3>
</div>
  <div class="product">
    <img src="assets/bottle.png">
    <div class="details">
      <div class="details-left">
        <h4>Reusable Water Bottle</h4>
        <p>$10 ⭐⭐⭐⭐☆ (700)</p>
      </div>
      <button class="btn add-to-cart" data-name="Reusable Water Bottle" data-price="10">Add to cart</button>
    </div>  
  </div>
  <div class="product">
    <img src="assets/bag.png">
    <div class="details">
      <div class="details-left">
        <h4>Reusable Bag</h4>
        <p>$20 ⭐⭐⭐⭐⭐ (300)</p>
      </div>
      <button class="btn add-to-cart" data-name="Reusable Bag" data-price="20">Add to cart</button>
    </div>
  </div>
  <div class="product">
    <img src="assets/toothbrush.png">
    <div class="details">
      <div class="details-left">
        <h4>Bamboo Toothbrush 2-pack</h4>
        <p>$12 ⭐⭐⭐⭐⭐ (1.2k)</p>
      </div>
      <button class="btn add-to-cart" data-name="Bamboo Toothbrush 2-pack" data-price="12">Add to cart</button>
    </div>
  </div>
  <div class="product">
    <img src="assets/compost-bin.jpeg">
    <div class="details">
      <div class="details-left">
        <h4>Kitchen Compost Bin</h4>
        <p>$25 ⭐⭐⭐⭐☆ (295)</p>
      </div>
      <button class="btn add-to-cart" data-name="Kitchen Compost Bin" data-price="25">Add to cart</button>
    </div>    
  </div>
  <div class="product">
    <img src="assets/straws.png">
    <div class="details">
      <div class="details-left">
        <h4>Reusable Straws (4-pack)</h4>
        <p>$8 ⭐⭐⭐⭐☆ (610)</p>
      </div>
      <button class="btn add-to-cart" data-name="Reusable Straws (4-pack)" data-price="8">Add to cart</button>
    </div>
  </div>  
  <div class="product">
    <img src="assets/trashbags.jpeg" alt="Compostable Trash Bags">
    <div class="details">
      <div class="details-left">
        <h4>Compostable Trash Bags (Roll of 20)</h4>
        <p>$6 ⭐⭐⭐⭐☆ (340)</p>
      </div>
      <button class="btn add-to-cart" data-name="Compostable Trash Bags" data-price="6">Add to cart</button>
    </div>
  </div>
  <div class="product">
    <img src="assets/cutlery.png" alt="Bamboo Cutlery Set">
    <div class="details">
      <div class="details-left">
        <h4>Bamboo Cutlery Set with Case</h4>
        <p>$12 ⭐⭐⭐⭐☆ (640)</p>
      </div>
      <button class="btn add-to-cart" data-name="Bamboo Cutlery Set with Case" data-price="12">Add to cart</button>
    </div>
  </div>    
  <div class="checkout-button-wrapper">
    <a href="checkout.html" class="btn checkout-btn">Go to Checkout</a>
  </div>  
</main>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cartCount = document.getElementById("cart-count");

    // Display current cart count from localStorage
    if (cartCount) {
      cartCount.textContent = localStorage.getItem("cartCount") || "0";
    }

    // Handle Add to Cart clicks
    const addButtons = document.querySelectorAll(".add-to-cart");
      addButtons.forEach(button => {
        button.addEventListener("click", () => {

          let count = parseInt(localStorage.getItem("cartCount") || "0", 10);
          count++;
          localStorage.setItem("cartCount", count);
          cartCount.textContent = count;

          const name = button.getAttribute("data-name");
          const price = parseFloat(button.getAttribute("data-price"));

          let cartItems = JSON.parse(localStorage.getItem("cartItems") || "[]");

          cartItems.push({ name, price });
          localStorage.setItem("cartItems", JSON.stringify(cartItems));
        });
      });
    });
</script>
<script>
  const searchInput = document.getElementById("site-search");
  const suggestionsBox = document.getElementById("search-suggestions");

  const suggestions = [
    // Shop
    "Reusable Water Bottle",
    "Reusable Bag",
    "Bamboo Toothbrush 2-pack",
    "Kitchen Compost Bin",
    "Reusable Straws (4-pack)",
    "Compostable Trash Bags",
    "Bamboo Cutlery Set with Case",
    // Articles
    "How to dispose of a diaper?",
    "What to do with old electronics?",
    "Recycle glass bottles",
    "How to reduce e-waste?",
    "What can and can't you recycle?",
    "Reduce and dispose of food waste",
    "Recycle batteries",
    "Biodegradable vs compostable",
    "Compost food scraps",
    "Sustainable living tips",
    "Reduce home energy use",
    "Eco-friendly bathroom swaps",
    "Water conservation",
    "Reduce plastics",
    "Go green guide",
    "Recycle clothing",
    "Eco labels",
    "Local vs imported goods",
    "Reusable grocery bags",
    "Are bamboo products sustainable?",
    "Ethical brands",
    // Track
    "Used a reusable bag",
    "Biked instead of drove",
    "Recycled an item",
    "Composted vegetable peels",
    "Other"
  ];

  const suggestionMap = {
    "Reusable Water Bottle": "shop.html",
    "Reusable Bag": "shop.html",
    "Bamboo Toothbrush 2-pack": "shop.html",
    "Kitchen Compost Bin": "shop.html",
    "Reusable Straws (4-pack)": "shop.html",
    "Compostable Trash Bags": "shop.html",
    "Bamboo Cutlery Set with Case": "shop.html",

    "How to dispose of a diaper?": "articles.html",
    "What to do with old electronics?": "articles.html",
    "Recycle glass bottles": "articles.html",
    "How to reduce e-waste?": "articles.html",
    "What can and can't you recycle?": "articles.html",
    "Reduce and dispose of food waste": "articles.html",
    "Recycle batteries": "articles.html",
    "Biodegradable vs compostable": "articles.html",
    "Compost food scraps": "articles.html",
    "Sustainable living tips": "articles.html",
    "Reduce home energy use": "articles.html",
    "Eco-friendly bathroom swaps": "articles.html",
    "Water conservation": "articles.html",
    "Reduce plastics": "articles.html",
    "Go green guide": "articles.html",
    "Recycle clothing": "articles.html",
    "Eco labels": "articles.html",
    "Local vs imported goods": "articles.html",
    "Reusable grocery bags": "articles.html",
    "Are bamboo products sustainable?": "articles.html",
    "Ethical brands": "articles.html",

    "Used a reusable bag": "track.html",
    "Biked instead of drove": "track.html",
    "Recycled an item": "track.html",
    "Composted vegetable peels": "track.html",
    "Other": "track.html"
  };

  let currentFocus = -1;

  searchInput.addEventListener("input", function () {
    const inputVal = this.value.toLowerCase();
    suggestionsBox.innerHTML = "";
    currentFocus = -1;

    if (inputVal.trim() === "") {
      suggestionsBox.style.display = "none";
      return;
    }

    const filtered = suggestions.filter(item =>
      item.toLowerCase().includes(inputVal)
    );

    if (filtered.length === 0) {
      suggestionsBox.style.display = "none";
      return;
    }

    filtered.forEach(item => {
      const div = document.createElement("div");
      div.textContent = item;
      div.classList.add("suggestion-item");
      div.addEventListener("click", () => {
        searchInput.value = item;
        suggestionsBox.style.display = "none";
        const targetPage = suggestionMap[item];
        if (targetPage) {
          window.location.href = targetPage;
        }
      });
      suggestionsBox.appendChild(div);
    });

    suggestionsBox.style.display = "block";
  });

  searchInput.addEventListener("keydown", function (e) {
    const items = suggestionsBox.getElementsByClassName("suggestion-item");
    if (!items.length) return;

    if (e.key === "ArrowDown") {
      currentFocus = (currentFocus + 1) % items.length;
      addActive(items);
      e.preventDefault();
    } else if (e.key === "ArrowUp") {
      currentFocus = (currentFocus - 1 + items.length) % items.length;
      addActive(items);
      e.preventDefault();
    } else if (e.key === "Enter") {
      e.preventDefault();
      if (currentFocus > -1) {
        items[currentFocus].click();
      }
    }
  });

  function addActive(items) {
    removeActive(items);
    if (currentFocus >= 0 && currentFocus < items.length) {
      items[currentFocus].classList.add("active");
    }
  }

  function removeActive(items) {
    for (let i = 0; i < items.length; i++) {
      items[i].classList.remove("active");
    }
  }

  document.addEventListener("click", (e) => {
    if (!e.target.closest(".smart-search-container")) {
      suggestionsBox.style.display = "none";
    }
  });
</script>
</body>
</html>
